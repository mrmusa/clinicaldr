<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Disaster Forecast v1</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="semantic/dist/semantic.min.css">
    <link rel="stylesheet" type="text/css" href="semantic/dist/custom.css">
    <script
    src="https://code.jquery.com/jquery-3.1.1.min.js"
    integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
    crossorigin="anonymous"></script>
    <script src="semantic/dist/semantic.min.js"></script>
</head>
<body>
    <div class="container">
        <h1 class="ui center aligned header">Welcome Home!</h1>
        
        <div class="ui three top attached ordered steps">
            <div class="active step">
                <!-- <i class="truck icon"></i> -->
                <div class="content">
                    <div class="title">Upload Phone Numbers</div>
                    <div class="description">Share the contact numbers of those in potential disaster areas</div>
                </div>
            </div>
            <div class="disabled step second">
                <!-- <i class="payment icon"></i> -->
                <div class="content">
                    <div class="title">Survey</div>
                    <div class="description">Enter billing information</div>
                </div>
            </div>
            <div class="disabled step third">
                <!-- <i class="info icon"></i> -->
                <div class="content">
                    <div class="title">Healthcare Center Forecast</div>
                    <div class="description">Verify order details</div>
                </div>
            </div>
        </div>
        <div class="ui attached active segment">
            <p>This is the first step</p>
            <form action="/api/contacts" id="csv-form">
                <div class="ui input">
                    <!-- <label for="upload">Choose CSV file to upload...</label> -->
                    <input type="file" name="upload" accept=".csv" multiple="false">
                </div>
                <div id="drop_zone" ondrop="dropHandler(event);" ondragover="dragOverHandler(event);">
                    <p>Drop your CSV file here...</p>
                </div>
            </form>
            <button disabled data-toggle="second" class="csv-submit">Click for next step</button>
        </div>
        <div class="ui attached hide segment second">
            <p>This is the second step</p>
            <button data-toggle="third">Click for next step</button>
        </div>
        <div class="ui attached hide segment third">
            <p>This is the third step</p>
            <!-- <button data-toggle="">Click for next step</button> -->
        </div>
        
    </div>

    <script>
        function dragOverHandler(event){
            event.preventDefault();
            $(this).css('background','lightgray');
        }

        function dropHandler(event){
            event.preventDefault();
        }

        $('.segment button').click(function(event){
            event.preventDefault();
            var activate = $(this).data('toggle');

            if($(this).hasClass('csv-submit')){
                $('form').submit();
            }
            $('.steps .active').toggleClass('active disabled');
            
            $('.steps .'+activate).toggleClass('disabled active');

            $(this).parent().toggleClass('hide active');

            $('div.segment.'+activate).toggleClass('active hide');
        });
        
        $('input:file').change(function(){
            let uploadItem = $('#csv-form input').get(0).files.length;

            if(uploadItem === 0){
                console.log('no items selected');
            }else{
                $('.csv-submit').removeAttr('disabled');
            }
        });
    </script>
</body>
</html>